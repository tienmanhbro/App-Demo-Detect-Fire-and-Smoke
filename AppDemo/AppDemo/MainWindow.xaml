<Window
    x:Class="AppDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="using:Microsoft.UI.Xaml">
    
    <Grid Padding="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Column="0" Grid.Row="0" Spacing="8">
            <TextBlock Text="Đầu vào" Style="{ThemeResource SubtitleTextBlockStyle}"/>
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" MinHeight="400">
                <Image x:Name="InputImage" Source="{x:Bind ViewModel.InputImageSource, Mode=OneWay}" Stretch="Uniform"/>
            </Border>
        </StackPanel>

        <StackPanel Grid.Column="1" Grid.Row="0" Margin="12,0,0,0" Spacing="8">
            <TextBlock Text="Kết quả" Style="{ThemeResource SubtitleTextBlockStyle}"/>
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" MinHeight="400">
                <Grid>
                    <Image x:Name="OutputImage" Source="{x:Bind ViewModel.OutputImageSource, Mode=OneWay}" Stretch="Uniform" Visibility="{x:Bind ViewModel.IsImageOutputVisible, Mode=OneWay}"/>
                    <MediaPlayerElement x:Name="OutputVideo" Source="{x:Bind ViewModel.OutputVideoSource, Mode=OneWay}" AutoPlay="True" AreTransportControlsEnabled="True" Visibility="{x:Bind ViewModel.IsVideoOutputVisible, Mode=OneWay}"/>
                </Grid>
            </Border>
        </StackPanel>

        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="12" Margin="0,24,0,0">
            <Button x:Name="btnSelectFile" Content="Chọn File (Ảnh/Video)" Click="SelectFileButton_Click" Style="{ThemeResource AccentButtonStyle}" MinWidth="200" Padding="12,8"/>
        </StackPanel>

        <Border Grid.RowSpan="2" Grid.ColumnSpan="2" Background="#80FFFFFF" Visibility="{x:Bind ViewModel.IsBusy, Mode=OneWay}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                <ProgressRing IsActive="True" Width="60" Height="60"/>
                <TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}" Style="{ThemeResource SubtitleTextBlockStyle}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>